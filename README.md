# Nextのチュートリアル実践
    Next.jsのチュートリアルを進めているのでそのアウトプットとして学んだことを記述する


## CSSスタイリング
### グローバルスタイル・・・アプリケーション内すべてのルートにCSSルールを追加できる

### CSSモジュール・・・一意のクラス名を自動的に生成できるので衝突を防げる


### clsx・・・状態や条件によって要素のスタイルを切り替える

## レイアウトとページの作成
### ネストされたルーディング
Next.jsではフォルダーを使用してルートを作成するファイルシステムルーディングを使用する。<br>
例: URL: http://localhost:3000/dashboard/invoices
```
- project
  -app
    -page.tsx
    -layout.tsx
    -dashboard
        -invoices //こいつ
        -customers
```


## ページ間の移動
### ナビゲーションを最適化する理由
aタグのhrefを使うとページ全体がリロードされてしまい、パフォーマンスが低下する。Linkコンポーネントを使用する必要がある。

### コンポーネント<Link>
アプリケーション全体をレンダリングすることなく一部を更新できるようになる。<br>
 

### パターン: アクティブ リンクの表示
現在どのページのURLかを取得する必要がある。これはNext.jsのusePathname()というフックを使ってパスをチェックできる。<br />
※フックを使用する場合クライアントコンポーネントに変換する必要がある。<br />


## データの取得
### データの取得方法
#### APIレイヤー
- APIを提供しているサードパーティサービスを使用する場合
- クライアントからデータを取得する場合
#### データベースクエリ
- APIエンドポイントを作成する場合
- サーバーコンポーネントを使用している場合

### リクエストウォーターフォールとは?
データ取得の処理が複数個存在する場合、前のデータ取得が完了に依存する一連のネットワーク要求。
例:
sample.ts
```ts
const res1 = await fetch("url1");// 2秒
const res2 = await fetch("url2");// 1秒
//res1の行の処理が完了してからres2の行の処理が完了する、3秒かかってしまう
```

### 並列データ取得
Promise.all()などを使用して並行に処理する
例:
sample.ts
```ts
const res1 = fetch("url1");// 2秒
const res2 = fetch("url2");// 1秒

const [res1, res2] = await Promise.all([promise1, promise2]);
//合計で2秒
```


## 静的レンダリングと動的レンダリング
### 静的レンダリングとは
データの取得とレンダリングをビルド時にサーバー上で行われる。
メリット
 - webサイトの高速化
 - サーバーの負荷の軽減

### ダイナミックレンダリングとは
クライアントからのリクエスト時にサーバー上でレンダリングされる。
メリット
 - リアルタイムでデータを取得
 - ユーザーの操作に基づいてデータの更新することが容易
 - リクエスト時に認識できる情報にアクセスできる。cookieやURLパラメータ

## ストリーミング
### ストリーミングとは
ストリーミングは、ルートを小さな「チャンク」に分割し、準備ができたらサーバーからクライアントに段階的にストリーミングできるようにするデータ転送手法です。<br>
ストリーミングすることでページの要求が遅いときに全体でロードが完了するまで待つのではなく個々にページを表示することができる。<br>

## 検索とページネーションの追加
### 検索パラメータを使用する理由
- フックマーク可能なURLと共有可能なURL・・・検索パラメータがURL内にあるため共有できる。
- サーバー側のレンダリングと初期読み込み・・・URLパラメータをサーバー上で使用してレンダリングできる。
- 分析とトラッキング・・・URL内に検索パラメータがあるのでURLを確認すればユーザーの行動を簡単に分析できる。

### 検索機能の追加(Nextフック)
- useSearchParam()・・・URLパラメータにアクセスできる。
- usePathname()・・・URLのパスを読み取ることができる、
- useRouter()・・・クライアントコンポーネント内のルート間のナビゲーションプログラムを可能にする。


## データの変更
### サーバーアクションとは
サーバー上で非同期コードを直接実行でき、APIエンドポイントを作成しなくて済む。<br>
POSTリクエスト、暗号化された入力チェック、厳密な入力チェック、エラーメッセージのハッシュ化、ホスト制限を実現する。

